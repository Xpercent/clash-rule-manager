<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>Clash Rule Manager - 设置</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <!-- 顶部全宽导航栏 -->
  <nav class="top-navbar">
    <div class="navbar-content">
      <img src="icons/icon48.png" alt="Logo" class="nav-logo">
      <span class="nav-title">Clash Rule Manager</span>
    </div>
  </nav>

  <div class="options-container">
    <!-- 规则分组标题栏 -->
    <header class="page-header">
      <h1>规则分组 (Rule Groups)</h1>
      <button id="add-group-button" class="btn-add">＋ 添加分组</button>
    </header>

    <!-- 动态插入规则卡片的容器 -->
    <div id="groups-container"></div>

    <!-- GitHub 配置区域 -->
    <section class="section">
      <div class="section-header">
        <h2>GitHub 同步配置</h2>
        <button id="pull-all-groups" class="btn-mini">🔄 扫描并拉取所有规则文件</button>
      </div>
      <div class="config-grid">
        <div class="field-column full-width">
          <label class="field-label">GitHub Token (PAT)</label>
          <input id="gh-token" type="password" class="field-input" placeholder="ghp_xxxxxxxx">
        </div>
        <div class="field-column">
          <label class="field-label">用户名 (Owner)</label>
          <input id="gh-owner" type="text" class="field-input" placeholder="GitHub ID">
        </div>
        <div class="field-column">
          <label class="field-label">仓库名 (Repo)</label>
          <input id="gh-repo" type="text" class="field-input" placeholder="Repository Name">
        </div>
        <div class="field-column full-width">
          <label class="field-label">存储路径 (Path)</label>
          <input id="gh-path" type="text" class="field-input" placeholder="例如: rules/ (扫描此目录下的 yaml)">
        </div>
      </div>
    </section>

    <!-- 底部操作栏 -->
    <footer>
      <button id="save-button" class="btn-save">💾 保存配置</button>
      <div id="save-status" class="status-bar"></div>
    </footer>
  </div>

  <!-- 规则分组卡片模板 -->
  <template id="group-card-template">
    <div class="group-card">
      <div class="field-column">
        <label class="field-label">显示名称</label>
        <input class="field-input display-name-input" type="text" placeholder="例如：直连">
      </div>
      <div class="field-column">
        <label class="field-label">文件名 (.yaml)</label>
        <input class="field-input file-name-input" type="text" placeholder="direct.yaml">
      </div>
      
      <!-- 同步状态徽章 -->
      <div class="sync-badge">
        上次同步: <span class="last-sync-time">从未同步</span>
      </div>

      <!-- 操作按钮组 -->
      <div class="group-actions">
        <button class="btn-pull">同步 Sync</button>
        <button class="btn-delete" title="删除分组">
          <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"></path>
          </svg>
        </button>
      </div>
    </div>
  </template>

  <script src="options.js"></script>
</body>
</html>